<!-- markdownlint-disable MD022 MD031 MD032 MD036 MD024 -->
# ReSpeaker USB 4 Mic Array Setup Guide

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ø—Ä–æ—à–∏–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø–æ–ª–µ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π –ø—Ç–∏—Ü

**–¶–µ–ª—å**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ReSpeaker USB 4 Mic Array –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ –ø—Ç–∏—Ü  
**–ü—Ä–æ—à–∏–≤–∫–∞**: 6-–∫–∞–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è beamforming –∏ raw –¥–∞–Ω–Ω—ã—Ö  
**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: DSP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø–æ–ª–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **ReSpeaker USB 4 Mic Array** (UAC1.0)
- **–ö–æ–º–ø—å—é—Ç–µ—Ä** —Å USB –ø–æ—Ä—Ç–æ–º (Linux/Windows/macOS)
- **Python 3.6+** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è DSP –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- **ALSA** (Linux) –∏–ª–∏ **Core Audio** (macOS) –¥–ª—è –∑–∞–ø–∏—Å–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

- **Linux**: Ubuntu 18.04+, Debian 10+, Raspberry Pi OS, NanoPI M4B
- **Windows**: Windows 10+ —Å –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏ Zadig
- **macOS**: macOS 10.14+ (–Ω–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)

---

## –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### Linux (Ubuntu/Debian/Raspberry Pi OS)

```bash
sudo apt update
sudo apt install -y python3 python3-pip libusb-1.0-0 git alsa-utils sox

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pyusb –∏ click (Ubuntu 24.04+)
sudo apt-get install -y python3-usb python3-click || python3 -m pip install --break-system-packages pyusb click
```

#### Windows

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.6+ —Å [python.org](https://python.org)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥—Ä–∞–π–≤–µ—Ä—ã —á–µ—Ä–µ–∑ [Zadig](https://zadig.akeo.ie/):
   - –í—ã–±–µ—Ä–∏—Ç–µ `SEEED DFU` –∏ `SEEED Control`
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `libusb-win32` (–ù–ï WinUSB)
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```cmd
pip install pyusb click
```

#### macOS

```bash
brew install python3 libusb
pip3 install pyusb click
```

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/respeaker/usb_4_mic_array.git
cd usb_4_mic_array
```

---

## –ü—Ä–æ—à–∏–≤–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –ü—Ä–æ—à–∏–≤–∫–∞ 6-–∫–∞–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ—à–∏–≤–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ü—Ä–æ—à–∏–≤–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç sudo –Ω–∞ Linux)
sudo python3 dfu.py --download 6_channels_firmware.bin
```

**–ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏:**

- –í—ã—Ç–∞—â–∏—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ USB –∫–∞–±–µ–ª—å
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –∫–∞–∫ `ArrayUAC10` –≤ ALSA

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—à–∏–≤–∫–∏

```bash
# Linux: –ø—Ä–æ–≤–µ—Ä–∫–∞ ALSA —É—Å—Ç—Ä–æ–π—Å—Ç–≤
arecord -l
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: card X: ArrayUAC10 [ReSpeaker 4 Mic Array (UAC1.0)]

# –¢–µ—Å—Ç –∑–∞–ø–∏—Å–∏ 6 –∫–∞–Ω–∞–ª–æ–≤ (16 kHz - –Ω–∞—Ç–∏–≤–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞)
arecord -D hw:ArrayUAC10,0 -f S16_LE -r 16000 -c 6 -d 5 test_6ch.wav
```

---

## ‚öôÔ∏è DSP –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø–æ–ª–µ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ tuning.py –¥–ª—è Python 3.10+

```bash
# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É tostring() -> tobytes()
sed -i 's/response.tostring()/response.tobytes()/' tuning.py
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (Linux)

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –±–µ–∑ sudo
sudo tee /etc/udev/rules.d/99-respeaker.rules >/dev/null <<'EOF'
SUBSYSTEM=="usb", ATTR{idVendor}=="2886", MODE="0666", GROUP="plugdev"
EOF
sudo udevadm control --reload-rules
sudo udevadm trigger
sudo usermod -aG plugdev $USER
# –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: newgrp plugdev
```

### –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ç–∏—Ü (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ø–æ —Å–ø–µ–∫—Ç—Ä—É —Ç–∏—à–∏–Ω—ã)

```bash
# –í—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å—Ä–µ–∑: 180 –ì—Ü (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è –Ω–∏–∑–∫–æ—á–∞—Å—Ç–æ—Ç–Ω–æ–≥–æ —à—É–º–∞)
python3 tuning.py HPFONOFF 3

# –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –±–∏–º—Ñ–æ—Ä–º–µ—Ä –≤–∫–ª—é—á–µ–Ω
python3 tuning.py FREEZEONOFF 0

# –≠—Ö–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –≤—ã–∫–ª—é—á–µ–Ω–æ (–≤ –ø–æ–ª–µ –Ω–µ –Ω—É–∂–Ω–æ)
python3 tuning.py ECHOONOFF 0
python3 tuning.py AECONOFF 0
python3 tuning.py AECFREEZEONOFF 0
python3 tuning.py NLAEC_MODE 0

# –®—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ: —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–π + –Ω–µ—Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–π + —Ç—Ä–∞–Ω–∑–∏–µ–Ω—Ç—ã
python3 tuning.py STATNOISEONOFF 1
python3 tuning.py NONSTATNOISEONOFF 1
python3 tuning.py TRANSIENTONOFF 1

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏—è (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –≤–µ—Ç—Ä–æ–≤–æ–≥–æ —à—É–º–∞)
python3 tuning.py GAMMA_NS_SR 2.5  # –£—Å–∏–ª–µ–Ω–æ –¥–ª—è —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–≥–æ —à—É–º–∞
python3 tuning.py GAMMA_NN_SR 1.1  # –ù–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è (firmware limitation)
python3 tuning.py MIN_NS_SR 0.1    # –ë–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–µ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–≥–æ —à—É–º–∞
python3 tuning.py MIN_NN_SR 0.1    # –ë–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–µ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–≥–æ —à—É–º–∞ (–≤–µ—Ç–µ—Ä)

# AGC: –≤–∫–ª—é—á–∏—Ç—å —Å —É–º–µ—Ä–µ–Ω–Ω—ã–º —É—Å–∏–ª–µ–Ω–∏–µ–º (—à—É–º –±—ã–ª –∏–∑-–∑–∞ —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥–∞, –∞ –Ω–µ —É—Å–∏–ª–µ–Ω–∏—è)
python3 tuning.py AGCONOFF 1
python3 tuning.py AGCMAXGAIN 5.0
python3 tuning.py AGCDESIREDLEVEL 0.005
python3 tuning.py AGCTIME 0.5

# VAD: –æ—Ç–∫–ª—é—á–∏—Ç—å (–Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è –ø—Ç–∏—Ü - –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤—Å–µ –∑–≤—É–∫–∏, –Ω–µ —Ç–æ–ª—å–∫–æ "–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å")
# GAMMAVAD_SR = 1000 –æ–∑–Ω–∞—á–∞–µ—Ç –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç VAD
# VAD –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–π —Ä–µ—á–∏ –∏ –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–µ–Ω–∏–µ –ø—Ç–∏—Ü
python3 tuning.py GAMMAVAD_SR 1000
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ —Å–ø–µ–∫—Ç—Ä–∞ (–≤–∫–ª—é—á–∞—è –≤–µ—Ç—Ä–æ–≤–æ–π —à—É–º):**
- `HPFONOFF`: –æ—Å—Ç–∞—ë—Ç—Å—è **3** (180 –ì—Ü - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ª—É—á—à–µ–µ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –Ω–∏–∑–∫–æ—á–∞—Å—Ç–æ—Ç–Ω–æ–≥–æ —à—É–º–∞)
- `GAMMA_NS_SR`: 1.0 ‚Üí **2.5** - —É—Å–∏–ª–µ–Ω–Ω–æ–µ —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–≥–æ —à—É–º–∞ (–¥–∏–∞–ø–∞–∑–æ–Ω: 0.0-3.0)
- `GAMMA_NN_SR`: **1.1** - –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ firmware, –¥–∏–∞–ø–∞–∑–æ–Ω: 0.0-3.0)
- `MIN_NS_SR`: 0.2 ‚Üí **0.1** - –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–µ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–≥–æ —à—É–º–∞ (–º–µ–Ω—å—à–µ = –±–æ–ª—å—à–µ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ)
- `MIN_NN_SR`: 0.3 ‚Üí **0.1** - –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–µ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–≥–æ —à—É–º–∞ (–≤–µ—Ç–µ—Ä) (–º–µ–Ω—å—à–µ = –±–æ–ª—å—à–µ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ)
- `AGCMAXGAIN`: default 30dB ‚Üí **5.0 dB** - –Ω–∏–∑–∫–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Å–∏–ª–µ–Ω–∏—è —à—É–º–∞ (–¥–∏–∞–ø–∞–∑–æ–Ω: 0-60 dB)
- `AGCDESIREDLEVEL`: **0.005** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç default -23dBov (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- `AGCTIME`: **0.5 —Å–µ–∫** - –≤—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏ AGC (–¥–∏–∞–ø–∞–∑–æ–Ω: 0.1-1.0 —Å–µ–∫)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
sudo tee /usr/local/bin/respeaker-tune.sh >/dev/null <<'EOF'
#!/usr/bin/env bash
set -e
cd /root/usb_4_mic_array || exit 0
python3 tuning.py HPFONOFF 3
python3 tuning.py FREEZEONOFF 0
python3 tuning.py ECHOONOFF 0
python3 tuning.py AECONOFF 0
python3 tuning.py AECFREEZEONOFF 0
python3 tuning.py NLAEC_MODE 0
python3 tuning.py STATNOISEONOFF 1
python3 tuning.py NONSTATNOISEONOFF 1
python3 tuning.py TRANSIENTONOFF 1
python3 tuning.py GAMMA_NS_SR 2.5
python3 tuning.py GAMMA_NN_SR 1.1
python3 tuning.py MIN_NS_SR 0.1
python3 tuning.py MIN_NN_SR 0.1
python3 tuning.py AGCONOFF 1
python3 tuning.py AGCMAXGAIN 5.0
python3 tuning.py AGCDESIREDLEVEL 0.005
python3 tuning.py AGCTIME 0.5
python3 tuning.py GAMMAVAD_SR 1000
EOF

sudo chmod +x /usr/local/bin/respeaker-tune.sh

# –°–æ–∑–¥–∞—Ç—å systemd —Å–µ—Ä–≤–∏—Å
sudo tee /etc/systemd/system/respeaker-tune.service >/dev/null <<'EOF'
[Unit]
Description=Apply ReSpeaker USB Mic DSP tuning at boot
After=sound.target multi-user.target
Wants=sound.target

[Service]
Type=oneshot
User=root
ExecStart=/usr/local/bin/respeaker-tune.sh
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target
EOF

sudo systemctl enable --now respeaker-tune.service
```

---

## üéµ –ó–∞–ø–∏—Å—å –∞—É–¥–∏–æ

### –ö–∞–Ω–∞–ª—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (6-–∫–∞–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ—à–∏–≤–∫–∞)

- **–ö–∞–Ω–∞–ª 0**: Beamformed/ASR (–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π, –≥–æ—Ç–æ–≤—ã–π –¥–ª—è BirdNET-Go)
- **–ö–∞–Ω–∞–ª—ã 1-4**: Raw –¥–∞–Ω–Ω—ã–µ —Å 4 –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–≤
- **–ö–∞–Ω–∞–ª 5**: Playback (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –ó–∞–ø–∏—Å—å beamformed –∫–∞–Ω–∞–ª–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è BirdNET-Go)

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–∞—è –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ ALSA (–ø—Ä–æ—â–µ)

```bash
# –ú–æ–Ω–æ 48 kHz —Å –∞–≤—Ç–æ-—Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥–æ–º
arecord -D plughw:ArrayUAC10,0 -f S16_LE -r 48000 -c 1 -d 10 test_mono_48k.wav

# –ü–æ—Ç–æ–∫ –≤ BirdNET-Go
arecord -D plughw:ArrayUAC10,0 -f S16_LE -r 48000 -c 1 -t raw \
| BirdNET-Go --format raw --sample-rate 48000 --channels 1 --bits 16
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ SoX (–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥)

```bash
# 16 kHz ‚Üí 48 kHz —á–µ—Ä–µ–∑ SoX
arecord -D hw:ArrayUAC10,0 -f S16_LE -r 16000 -c 1 -t raw \
| sox -t raw -r 16000 -e signed -b 16 -c 1 - -t raw -r 48000 - \
| BirdNET-Go --format raw --sample-rate 48000 --channels 1 --bits 16
```

#### –í–∞—Ä–∏–∞–Ω—Ç 3: ALSA PCM –¥–ª—è –∫–∞–Ω–∞–ª–∞ 0 (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω —è–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å)

```bash
# –°–æ–∑–¥–∞—Ç—å ALSA –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –∫–∞–Ω–∞–ª–∞ 0
sudo tee /etc/asound.conf >/dev/null <<'EOF'
pcm.respeaker_ch0 {
  type route
  slave { pcm "hw:ArrayUAC10,0" channels 6 }
  ttable.0.0 1
}
pcm.birdnet_ch0 {
  type plug
  slave { pcm "respeaker_ch0" }
}
EOF

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
arecord -D birdnet_ch0 -f S16_LE -r 48000 -c 1 -d 10 test_birdnet_ch0.wav
```

### –ó–∞–ø–∏—Å—å –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤ (–¥–ª—è –∞–Ω–∞–ª–∏–∑–∞)

```bash
# 6 –∫–∞–Ω–∞–ª–æ–≤, 16 kHz (–Ω–∞—Ç–∏–≤–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞)
arecord -D hw:ArrayUAC10,0 -f S16_LE -r 16000 -c 6 -d 10 test_all_channels.wav

# –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
aplay -D plughw:ArrayUAC10,0 -f S16_LE -r 16000 -c 1 test_all_channels.wav
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å BirdNET-Go

### ‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ: SoX + ALSA Loopback (–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥)

–î–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –∑–≤—É–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SoX –¥–ª—è —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥–∞ 16kHz ‚Üí 48kHz —á–µ—Ä–µ–∑ ALSA Loopback —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥—É–ª—è loopback
apt-get install -y sox python3-scipy python3-numpy
echo "snd-aloop" > /etc/modules-load.d/snd-aloop.conf
# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ BirdNET-Go
echo "options snd-aloop id=ACapture index=2" > /etc/modprobe.d/snd-aloop.conf
modprobe snd-aloop

# 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å Log-MMSE –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
cp scripts/log_mmse_processor.py /usr/local/bin/
chmod +x /usr/local/bin/log_mmse_processor.py

# 3. –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∞—É–¥–∏–æ
cat > /usr/local/bin/respeaker_loopback.sh << 'EOF'
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ ReSpeaker —á–µ—Ä–µ–∑ Log-MMSE –∏ SoX –≤ ALSA loopback
while true; do
    arecord -D hw:ArrayUAC10,0 -f S16_LE -r 16000 -c 6 -t raw 2>/dev/null | \
    python3 /usr/local/bin/log_mmse_processor.py | \
    sox -t raw -r 16000 -c 1 -e signed-integer -b 16 -L - \
        -t raw -r 48000 -c 1 -e signed-integer -b 16 -L - gain -2.0 | \
    aplay -D hw:2,1,0 -f S16_LE -r 48000 -c 1 -t raw 2>/dev/null || sleep 1
done
EOF
chmod +x /usr/local/bin/respeaker_loopback.sh

# 4. –°–æ–∑–¥–∞—Ç—å systemd —Å–µ—Ä–≤–∏—Å
cat > /etc/systemd/system/respeaker-loopback.service << 'EOF'
[Unit]
Description=ReSpeaker Audio Pipeline with Log-MMSE and SoX
After=sound.target
Wants=sound.target

[Service]
Type=simple
ExecStart=/usr/local/bin/respeaker_loopback.sh
Restart=always
RestartSec=5
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
EOF

# 5. ALSA –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
# BirdNET-Go –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ hw:Loopback,0,0
# –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ PCM —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –≤–∏–¥–Ω—ã –≤ —Å–ø–∏—Å–∫–µ BirdNET-Go

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
systemctl daemon-reload
systemctl enable respeaker-loopback.service
systemctl start respeaker-loopback.service

# 7. –ü—Ä–æ–≤–µ—Ä–∫–∞
systemctl status respeaker-loopback.service
arecord -D hw:2,0,0 -f S16_LE -r 48000 -c 1 -d 2 /tmp/test.wav

# 8. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)
reboot
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ BirdNET-Go Web GUI

1. –û—Ç–∫—Ä–æ–π—Ç–µ BirdNET-Go Web GUI: `http://–í–ê–®_IP:8080`
2. Settings ‚Üí Audio Settings ‚Üí Audio Input Device
3. –í —Å–ø–∏—Å–∫–µ –±—É–¥–µ—Ç 4 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–æ–±–∞ Loopback –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–º–µ–Ω–∞ - —ç—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞):
   - `realtek,rt5651-codec` (`:1,0`) - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ
   - **`Loopback, Loopback PCM` (`:2,0`)** - **–ò–°–ü–û–õ–¨–ó–£–ô–¢–ï –≠–¢–û** 
   - `Loopback, Loopback PCM` (`:2,1`) - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ
   - `ReSpeaker 4 Mic Array (UAC1.0), USB Audio` (`:3,0`) - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ
   
–û–±–∞ Loopback —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–º–µ–Ω–∞ –≤ —Å–ø–∏—Å–∫–µ (—ç—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞ ALSA –∏ BirdNET-Go).
   
   **–ö–∞–∫ —Ä–∞–∑–ª–∏—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —Å–ø–∏—Å–∫–µ:**
   
   –ü–æ—Ä—è–¥–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ BirdNET-Go:
   1. `realtek,rt5651-codec` (`:1,0`) - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ
   2. `Loopback, Loopback PCM` (`:2,1`) - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ (–≤—Ç–æ—Ä–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ —Å–ø–∏—Å–∫–µ)
   3. **`Loopback, Loopback PCM` (`:2,0`)** - **–ò–°–ü–û–õ–¨–ó–£–ô–¢–ï –≠–¢–û** (—Ç—Ä–µ—Ç—å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ —Å–ø–∏—Å–∫–µ)
   4. `ReSpeaker 4 Mic Array (UAC1.0), USB Audio` (`:3,0`) - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ
   
   **–ü–†–ê–í–ò–õ–û:** –í—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–π—Ç–µ **–¢–†–ï–¢–¨–ï —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ —Å–ø–∏—Å–∫–µ** - —ç—Ç–æ `Loopback, Loopback PCM` —Å –∏–Ω–¥–µ–∫—Å–æ–º `:2,0`
   
–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ BirdNET-Go –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (`:2,0`).
   –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ - –≤—ã–±–µ—Ä–∏—Ç–µ **–¢–†–ï–¢–¨–ï —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ** –≤ —Å–ø–∏—Å–∫–µ.
   
   **–í–∞–∂–Ω–æ:** 
   - Device 0 (`:2,0`) - —ç—Ç–æ capture —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ BirdNET-Go —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
   - Device 1 (`:2,1`) - —ç—Ç–æ playback —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∫—É–¥–∞ —Å–∫—Ä–∏–ø—Ç `respeaker-loopback` –ø–∏—à–µ—Ç –¥–∞–Ω–Ω—ã–µ
   - BirdNET-Go –¥–æ–ª–∂–µ–Ω —á–∏—Ç–∞—Ç—å –∏–∑ device 0 (`:2,0`), –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ **—Ç—Ä–µ—Ç—å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ** –≤ —Å–ø–∏—Å–∫–µ
   - –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ BirdNET-Go –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (`:2,0`)

#### Log-MMSE —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ

–í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ pipeline –≤–∫–ª—é—á–∞–µ—Ç Log-MMSE —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–∏ –ø—Ç–∏—Ü –≤ —É—Å–ª–æ–≤–∏—è—Ö –≤–µ—Ç—Ä–∞ –∏ —Ñ–æ–Ω–æ–≤–æ–≥–æ —à—É–º–∞.

**–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:** –°–º. [audio_pipeline.md](audio_pipeline.md)

**–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
- –ê–ª–≥–æ—Ä–∏—Ç–º: Log-MMSE (Ephraim & Malah, 1985)
- –°–∫—Ä–∏–ø—Ç: `/usr/local/bin/log_mmse_processor.py`
- Pipeline: ReSpeaker ‚Üí Log-MMSE ‚Üí SoX ‚Üí Loopback ‚Üí BirdNET-Go

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

- –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥ —á–µ—Ä–µ–∑ SoX (–ª—É—á—à–µ —á–µ–º ALSA plug)
- Log-MMSE —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–∞ 0 (beamformed)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ

#### –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª—è `snd-aloop`
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è ALSA –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `/etc/asound.conf`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ `respeaker-loopback`

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª—è
lsmod | grep snd_aloop

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
systemctl status respeaker-loopback.service

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
arecord -D hw:LoopbackRespeak,0,0 -f S16_LE -r 48000 -c 1 -d 2 /tmp/test.wav
```

---

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ plughw (–ø—Ä–æ—Å—Ç–æ–π, –Ω–æ —Ö—É–∂–µ –∫–∞—á–µ—Å—Ç–≤–æ)

1. –û—Ç–∫—Ä–æ–π—Ç–µ BirdNET-Go Web GUI
2. Settings ‚Üí Audio Input ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ:
   - `plughw:ArrayUAC10,0` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥ —á–µ—Ä–µ–∑ ALSA plug)

### –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Docker

```bash
# –ï—Å–ª–∏ BirdNET-Go –≤ Docker
arecord -D plughw:ArrayUAC10,0 -f S16_LE -r 48000 -c 1 -t raw \
| docker exec -i birdnet-go python app.py \
  --format raw --sample-rate 48000 --channels 1 --bits 16 \
  --lat –í–ê–®–ê_–®–ò–†–û–¢–ê --lon –í–ê–®–ê_–î–û–õ–ì–û–¢–ê
```

---

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: "Device or resource busy"

```bash
# –û—Å–≤–æ–±–æ–¥–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
sudo systemctl stop birdnet-go 2>/dev/null || true
docker ps -q --filter name=birdnet | xargs -r docker stop
sudo pkill -9 arecord 2>/dev/null || true

# –ü—Ä–æ–≤–µ—Ä–∫–∞
arecord -D plughw:ArrayUAC10,0 -f S16_LE -r 48000 -c 1 -d 3 /dev/null
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Access denied" –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ DSP

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ USB
lsusb | grep -i seeed
sudo usermod -aG plugdev $USER
newgrp plugdev

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sudo
sudo python3 tuning.py AGCONOFF 1
```

### –ü—Ä–æ–±–ª–µ–º–∞: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –≤–∏–¥–Ω–æ –≤ ALSA

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
lsusb | grep -i seeed
dmesg | tail -20

# –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å USB
# –í—ã—Ç–∞—â–∏—Ç—å –∏ –≤—Å—Ç–∞–≤–∏—Ç—å –∫–∞–±–µ–ª—å
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –∑–≤—É–∫–∞ –≤ –∑–∞–ø–∏—Å–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ä–æ–≤–Ω–∏
arecord -D plughw:ArrayUAC10,0 -f S16_LE -r 48000 -c 1 -d 5 test.wav
aplay test.wav

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DSP
python3 tuning.py AGCONOFF
python3 tuning.py AGCMAXGAIN
```

### –ü—Ä–æ–±–ª–µ–º–∞: –§–æ–Ω–æ–≤—ã–π —à—É–º –≤ –∑–∞–ø–∏—Å–∏

–ï—Å–ª–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä —à—É–º–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–æ–º–µ—Ö, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

#### 1. –í–µ—Ç—Ä–æ–∑–∞—â–∏—Ç–∞ (–º–µ—Ö–æ–≤–æ–π —á–µ—Ö–æ–ª)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∏–∑–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π —à—É–º –æ—Ç –≤–µ—Ç—Ä–∞, –¥–≤–∏–∂–µ–Ω–∏—è –≤–æ–∑–¥—É—Ö–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ö–æ–≤–æ–π –≤–µ—Ç—Ä–æ–∑–∞—â–∏—Ç–Ω—ã–π —á–µ—Ö–æ–ª (deadcat/windshield) –Ω–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–æ–ª–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–æ–∑–¥—É—Ö–µ
- –ü–æ–¥–∞–≤–ª—è–µ—Ç –Ω–∏–∑–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–µ —à—É–º—ã –æ—Ç –≤–µ—Ç—Ä–∞ –∏ –¥–≤–∏–∂–µ–Ω–∏—è –≤–æ–∑–¥—É—Ö–∞

**–ì–¥–µ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏:**
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω—ã –∞—É–¥–∏–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- –û–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω—ã (AliExpress, Amazon)
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –≤–µ—Ç—Ä–æ–∑–∞—â–∏—Ç—ã –¥–ª—è USB-–º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–≤

#### 2. –≠–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω–∏—Ç–Ω—ã–µ –ø–æ–º–µ—Ö–∏ –æ—Ç –õ–≠–ü (–≤—ã—Å–æ–∫–æ–≤–æ–ª—å—Ç–Ω—ã—Ö –ª–∏–Ω–∏–π)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∏–∑–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π –≥—É–ª –æ—Ç –≤—ã—Å–æ–∫–æ–≤–æ–ª—å—Ç–Ω—ã—Ö –ª–∏–Ω–∏–π —ç–ª–µ–∫—Ç—Ä–æ–ø–µ—Ä–µ–¥–∞—á–∏ (–õ–≠–ü)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–æ–º–µ—Ö –æ—Ç –õ–≠–ü:**
- **–ß–∞—Å—Ç–æ—Ç–∞ —Å–µ—Ç–∏:** 50 –ì—Ü (–†–æ—Å—Å–∏—è) –∏–ª–∏ 60 –ì—Ü
- **–ì–∞—Ä–º–æ–Ω–∏–∫–∏:** 100 –ì—Ü, 150 –ì—Ü, 200 –ì—Ü, 250 –ì—Ü...
- **–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ—è–≤–ª–µ–Ω–∏—è:**
  - –ù–∏–∑–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π –≥—É–ª (50/60 –ì—Ü –∏ –≥–∞—Ä–º–æ–Ω–∏–∫–∏)
  - –ü–∏–∫–∏ –≤ —Å–ø–µ–∫—Ç—Ä–µ –Ω–∞ 50, 100, 150, 200 –ì—Ü
  - –í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —à—É–º–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 50-500 –ì—Ü
  - –ù–∞–≤–æ–¥–∫–∏ –Ω–∞ –∫–∞–±–µ–ª–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–µ–∑–∞–∑–µ–º–ª–µ–Ω–Ω—ã–µ)

**–ü—Ä–∏–º–µ—Ä –∏–∑ –∞–Ω–∞–ª–∏–∑–∞ —Å–ø–µ–∫—Ç—Ä–∞:**
- –ü–∏–∫ –Ω–∞ **93.8 –ì—Ü –ø—Ä–∏ -56.4 –¥–ë** –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω —Å –õ–≠–ü
- 93.8 –ì—Ü ‚âà 2-—è –≥–∞—Ä–º–æ–Ω–∏–∫–∞ 50 –ì—Ü (100 –ì—Ü) —Å –Ω–µ–±–æ–ª—å—à–∏–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º
- –í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —à—É–º–∞ –¥–æ 200 –ì—Ü —Ç–∏–ø–∏—á–µ–Ω –¥–ª—è –õ–≠–ü 110 –∫–í

**–ó–∞—â–∏—Ç–∞ –æ—Ç –õ–≠–ü:**

1. **–ó–∞–∑–µ–º–ª–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞** (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
   - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è –Ω–∞–≤–æ–¥–æ–∫
   - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–Ω–∏–∂–∞–µ—Ç –ø–æ–º–µ—Ö–∏

2. **–§–µ—Ä—Ä–∏—Ç–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä –Ω–∞ USB-–∫–∞–±–µ–ª—å** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–µ—Ä—Ä–∏—Ç–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä (ferrite bead/choke) –Ω–∞ USB-–∫–∞–±–µ–ª—å
   - –§–∏–ª—å—Ç—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–ª–∏–∂–µ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É
   - –ü–æ–¥–∞–≤–ª—è–µ—Ç –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–µ —ç–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω–∏—Ç–Ω—ã–µ –ø–æ–º–µ—Ö–∏ –∏ –≥–∞—Ä–º–æ–Ω–∏–∫–∏
   - **–¢–∏–ø—ã:** –ó–∞—â–µ–ª–∫–∏–≤–∞—é—â–∏–µ—Å—è (snap-on) –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ –∫–∞–±–µ–ª—å

3. **–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π USB-–∫–∞–±–µ–ª—å** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π USB-–∫–∞–±–µ–ª—å
   - –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≤–æ–¥–∫–∏ –æ—Ç —ç–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω–∏—Ç–Ω–æ–≥–æ –ø–æ–ª—è –õ–≠–ü

4. **–ü—Ä–æ–∫–ª–∞–¥–∫–∞ –∫–∞–±–µ–ª—è** (–≤–∞–∂–Ω–æ)
   - –ò–∑–±–µ–≥–∞—Ç—å –ø—Ä–æ–∫–ª–∞–¥–∫–∏ –∫–∞–±–µ–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –õ–≠–ü
   - –ü—Ä–æ–∫–ª–∞–¥—ã–≤–∞—Ç—å –∫–∞–±–µ–ª—å –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–æ –∫ –õ–≠–ü (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
   - –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª–∏–Ω—É –∫–∞–±–µ–ª—è

5. **Log-MMSE —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ** (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
   - HPF –Ω–∞ 180 –ì—Ü (–º–∏–∫—Ä–æ—Ñ–æ–Ω) –ø–æ–¥–∞–≤–ª—è–µ—Ç 50/60 –ì—Ü –∏ –ø–µ—Ä–≤—ã–µ –≥–∞—Ä–º–æ–Ω–∏–∫–∏
   - HPF –Ω–∞ 300 –ì—Ü (BirdNET-Go) –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–∞–≤–ª—è–µ—Ç –≥–∞—Ä–º–æ–Ω–∏–∫–∏ –¥–æ 300 –ì—Ü
   - Log-MMSE —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–π —à—É–º –æ—Ç –õ–≠–ü
   - –°–º. [audio_pipeline.md](audio_pipeline.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π

**–ì–¥–µ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ —Ñ–µ—Ä—Ä–∏—Ç–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:**
- –†–∞–¥–∏–æ–º–∞–≥–∞–∑–∏–Ω—ã
- –û–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω—ã (AliExpress, eBay)
- –ò—Å–∫–∞—Ç—å "ferrite bead USB" –∏–ª–∏ "ferrite choke USB"

#### 3. –§–µ—Ä—Ä–∏—Ç–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä –Ω–∞ –∫–∞–±–µ–ª—å –ø–∏—Ç–∞–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –≠–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω–∏—Ç–Ω—ã–µ –ø–æ–º–µ—Ö–∏ –æ—Ç –±–ª–æ–∫–∞ –ø–∏—Ç–∞–Ω–∏—è, –Ω–∞–≤–æ–¥–∫–∏ –ø–æ USB-–∫–∞–±–µ–ª—é

**–†–µ—à–µ–Ω–∏–µ:**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–µ—Ä—Ä–∏—Ç–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä (ferrite bead/choke) –Ω–∞ USB-–∫–∞–±–µ–ª—å –ø–∏—Ç–∞–Ω–∏—è
- –§–∏–ª—å—Ç—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–ª–∏–∂–µ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É
- –ü–æ–¥–∞–≤–ª—è–µ—Ç –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–µ —ç–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω–∏—Ç–Ω—ã–µ –ø–æ–º–µ—Ö–∏

**–¢–∏–ø—ã —Ñ–µ—Ä—Ä–∏—Ç–æ–≤—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
- –ó–∞—â–µ–ª–∫–∏–≤–∞—é—â–∏–µ—Å—è (snap-on) - —É–¥–æ–±–Ω—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–∞–±–µ–ª—å
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ –∫–∞–±–µ–ª—å - –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–ì–¥–µ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏:**
- –†–∞–¥–∏–æ–º–∞–≥–∞–∑–∏–Ω—ã
- –û–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω—ã (AliExpress, eBay)
- –ò—Å–∫–∞—Ç—å "ferrite bead USB" –∏–ª–∏ "ferrite choke USB"

#### 4. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π USB-–∫–∞–±–µ–ª—å
- –ò–∑–±–µ–≥–∞—Ç—å –ø—Ä–æ–∫–ª–∞–¥–∫–∏ –∫–∞–±–µ–ª—è —Ä—è–¥–æ–º —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –ø–æ–º–µ—Ö (–±–ª–æ–∫–∏ –ø–∏—Ç–∞–Ω–∏—è, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä—ã)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π USB-–ø–æ—Ä—Ç, –Ω–µ —á–µ—Ä–µ–∑ USB-—Ö–∞–±
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–∑–µ–º–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –õ–≠–ü)

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ DSP

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
python3 tuning.py HPFONOFF
python3 tuning.py AGCONOFF
python3 tuning.py STATNOISEONOFF
python3 tuning.py NONSTATNOISEONOFF
python3 tuning.py GAMMAVAD_SR
```

### –¢–µ—Å—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–∏

```bash
# –ó–∞–ø–∏—Å—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞
arecord -D plughw:ArrayUAC10,0 -f S16_LE -r 48000 -c 1 -d 30 field_test.wav

# –ê–Ω–∞–ª–∏–∑ —Å–ø–µ–∫—Ç—Ä–∞ (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω sox)
sox field_test.wav -n spectrogram -o spectrogram.png
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —É—Ä–æ–≤–Ω–µ–π
arecord -D plughw:ArrayUAC10,0 -f S16_LE -r 48000 -c 1 -t raw | od -A d -t d1 | head -20
```

---

## üé® –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ LED –∫–æ–ª—å—Ü–æ–º

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```bash
pip3 install pixel-ring
```

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

```python
from pixel_ring import PixelRing
p = PixelRing()

# –í—ã–∫–ª—é—á–∏—Ç—å –≤—Å–µ LED
p.off()

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–≤–µ—Ç (R, G, B)
p.set_color(0, 255, 0)  # –∑–µ–ª—ë–Ω—ã–π
p.set_color(255, 0, 0)  # –∫—Ä–∞—Å–Ω—ã–π
p.set_color(0, 0, 255)  # —Å–∏–Ω–∏–π

# –ê–Ω–∏–º–∞—Ü–∏–∏
p.think()
p.listen()
p.speak()
p.wait()
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ReSpeaker USB 4 Mic Array GitHub](https://github.com/respeaker/usb_4_mic_array)
- [ReSpeaker Pixel Ring](https://github.com/respeaker/pixel_ring)
- [Seeed Studio Product Page](https://www.seeedstudio.com/ReSpeaker-Mic-Array-v2.0-p-3053.html)

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [ALSA Configuration](https://alsa-project.org/wiki/Configuration)
- [SoX Documentation](http://sox.sourceforge.net/Docs/Documentation)
- [USB Audio Class Specification](https://www.usb.org/sites/default/files/documents/audio10.pdf)

---


