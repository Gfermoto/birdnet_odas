# –°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π BirdNET-Go —Å ReSpeaker USB Mic Array –Ω–∞ NanoPi M4B.

## üìã –°–ø–∏—Å–æ–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤

### üé§ ReSpeaker

#### `respeaker-tune.sh`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–∏–º–µ–Ω—è–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ DSP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è ReSpeaker USB Mic Array.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
sudo /usr/local/bin/respeaker-tune.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç HPF (High-Pass Filter) –Ω–∞ 180 –ì—Ü
- –í–∫–ª—é—á–∞–µ—Ç —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ (—Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–µ, –Ω–µ—Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–µ, —Ç—Ä–∞–Ω–∑–∏–µ–Ω—Ç—ã)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç AGC —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —É—Å–∏–ª–µ–Ω–∏—è
- –û—Ç–∫–ª—é—á–∞–µ—Ç VAD (–Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è –ø—Ç–∏—Ü)

**–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫:** –°–æ–∑–¥–∞–µ—Ç—Å—è systemd —Å–µ—Ä–≤–∏—Å `respeaker-tune.service` –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.

---

#### `respeaker_loopback.sh`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥–∞–µ—Ç –∞—É–¥–∏–æ —Å ReSpeaker —á–µ—Ä–µ–∑ SoX –≤ ALSA loopback —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è BirdNET-Go.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ systemd —Å–µ—Ä–≤–∏—Å
systemctl status respeaker-loopback.service
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ß–∏—Ç–∞–µ—Ç –∞—É–¥–∏–æ —Å ReSpeaker (16kHz, 6 –∫–∞–Ω–∞–ª–æ–≤)
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–∞–Ω–∞–ª 0 (beamformed)
- –†–µ—Å–µ–º–ø–ª–∏—Ä—É–µ—Ç –¥–æ 48kHz —á–µ—Ä–µ–∑ SoX
- –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ ALSA loopback device 1 (playback)

**–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫:** –°–æ–∑–¥–∞–µ—Ç—Å—è systemd —Å–µ—Ä–≤–∏—Å `respeaker-loopback.service` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.

---

### üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### `check_audio_devices.sh`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∫–∞–∫–∏–µ –∞—É–¥–∏–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∑–∞–Ω—è—Ç—ã –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
/usr/local/bin/check_audio_devices.sh
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –ó–∞–Ω—è—Ç—ã–µ ALSA —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –ö–∞–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç BirdNET-Go
- –ó–∞–Ω—è—Ç –ª–∏ device 0 (capture –¥–ª—è BirdNET-Go) - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–Ω—è—Ç BirdNET-Go
- –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å respeaker-loopback (–ø–∏—à–µ—Ç –≤ device 1 –¥–ª—è playback)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∏–ª–∏ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∞—É–¥–∏–æ.

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è BirdNET-Go - —ç—Ç–æ **–¢–†–ï–¢–¨–ï —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ —Å–ø–∏—Å–∫–µ** (`:2,0`), –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ BirdNET-Go —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ.

---

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

#### `fix_birdnet_device.sh`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –≤—ã–±–æ—Ä–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ BirdNET-Go.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ systemd —Å–µ—Ä–≤–∏—Å –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
systemctl status birdnet-device-check.service
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ñ–¥–µ—Ç 15 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ BirdNET-Go)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ `:2,1`
- –í—ã–≤–æ–¥–∏—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ
- –î–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é (–≤—ã–±—Ä–∞—Ç—å –¢–†–ï–¢–¨–ï —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ —Å–ø–∏—Å–∫–µ - `:2,0`)

**–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫:** –°–æ–∑–¥–∞–µ—Ç—Å—è systemd —Å–µ—Ä–≤–∏—Å `birdnet-device-check.service` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏.

**‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ BirdNET-Go –æ–±—ã—á–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (`:2,0` - —Ç—Ä–µ—Ç—å–µ –≤ —Å–ø–∏—Å–∫–µ).

---

### üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

#### `setup_nanopi.sh`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã –Ω–∞ NanoPi M4B.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
chmod +x scripts/setup_nanopi.sh
sudo ./scripts/setup_nanopi.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Docker, SoX, ALSA)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç ReSpeaker
- –°–æ–∑–¥–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏ —Å–µ—Ä–≤–∏—Å—ã
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç BirdNET-Go

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ `/usr/local/bin/` –∏ –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
sudo cp scripts/*.sh /usr/local/bin/
sudo chmod +x /usr/local/bin/*.sh
```

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –æ–±–Ω–æ–≤–∏—Ç–µ –∏—Ö –≤ –ø—Ä–æ–µ–∫—Ç–µ:

```bash
# –° —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä
scp root@192.168.1.136:/usr/local/bin/*.sh scripts/
```

–ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ, –æ–±–Ω–æ–≤–∏—Ç–µ –∏—Ö –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:

```bash
# –° –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
scp scripts/*.sh root@192.168.1.136:/usr/local/bin/
ssh root@192.168.1.136 "chmod +x /usr/local/bin/*.sh"
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –æ—Ç root –∏–ª–∏ —á–µ—Ä–µ–∑ sudo
- –°–∫—Ä–∏–ø—Ç—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å ReSpeaker, —Ç—Ä–µ–±—É—é—Ç –Ω–∞–ª–∏—á–∏—è `/root/usb_4_mic_array/`
- –°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ Docker –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `birdnet-go`
- –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –∏—Ö –≤ –ø—Ä–æ–µ–∫—Ç–µ!

